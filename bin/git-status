#!/bin/bash
set -e
set -o pipefail

# Get the list of files from `git status --porcelain`
files=$(git status --porcelain | awk '{print $2}')

# Check if there are any files to diff
if [ -z "$files" ]; then
    echo "No changes."
    exit 0
fi

# Loop through each file and show the diff
for file in $files; do
    echo "Changes:"
    echo
    echo "==== Diff for: $file ===="
    git diff --word-diff=color --minimal "$file"
done
