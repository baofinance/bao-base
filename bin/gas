#!/usr/bin/env bash
set -e
set -o pipefail

[[ "${BAO_BASE_VERBOSITY}" -gt 0 ]] && set -x
# separate build output & cache
FOUNDRY_OUT=out/_gas
export FOUNDRY_CACHE_PATH=cache/_gas

# use the gas limit set in foundry.toml
forge test --out ${FOUNDRY_OUT} --nmp script/**/*.t.sol --isolate --gas-report "$@"

{ set +x; } 2>/dev/null
